<div class="row-fluid">
    <div class="span2 offset5">
        <h4>Projet :</h4>
        <select class="form-control" id="selectProjet" onChange="majSelectedSuiv();majTaches();majEtatProj();majRecapProj(); majRecapTaches();"></select>
    </div>
</div>
<div class="row-fluid">
    <div class="span4">
        <fieldset>
            <legend>Rappel Projet</legend>
            <table class="table table-bordered table-hover">

                <tbody>
                    <tr >
                        <td class="btn-primary disabled col-md-2">nombre de tâches</td>
                        <td class="col-md-1" id="nbTask"></td>
                        <td class="col-md-1"></td>
                    </tr>
                    <tr >
                        <td class="btn-primary disabled col-md-2">dépassements de charges</td>
                        <td class="col-md-1" id="upperThanInitial"></td>
                        <td class="col-md-1" id="percentUpper"></td>
                    </tr>
                    <tr>
                        <td class="btn-primary disabled col-md-2" >retards</td>
                        <td class="col-md-1" id="late"></td>
                        <td class="col-md-1" id="percentLate"></td>
                    </tr>
                </tbody>
            </table>
        </fieldset>
    </div>
    <div class="span8">
        <fieldset>
            <legend>Etat Projet</legend>
            <table class="table table-bordered table-hover">
                <thead >
                    <tr>
                        <td class="col-md-2"></td>
                        <td class="col-md-2 btn-primary disabled">prévu</td>
                        <td class="col-md-2 btn-primary disabled">réel</td>
                        <td class="col-md-2 btn-primary disabled">Ecarts</td>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td class="btn-primary disabled">début</td>
                        <td id="debutPrevu"></td>
                        <td id="debutReel"></td>
                        <td id="ecartDebut"></td>
                    </tr>
                    <tr>
                        <td class="btn-primary disabled">fin</td>
                        <td id="finPrevu"></td>
                        <td id="finReel"></td>
                        <td id="ecartFin"></td>
                    </tr>
                    <tr>
                        <td class="btn-primary disabled">durée (h)</td>
                        <td id="dureePrevue"></td>
                        <td id="dureeReelle"></td>
                        <td id="ecartDuree"></td>
                    </tr>
                    <tr>
                        <td class="btn-primary disabled">montant (€)</td>
                        <td id="montantPrevue"></td>
                        <td id="montantReelle"></td>
                        <td id="ecartMontant"></td>
                    </tr>
                </tbody>
            </table>
        </fieldset>
    </div>
</div>
<div class="row-fluid">
    <div class="span12">
        <fieldset>
            <legend>Récapitulatif des tâches</legend>
            <table class="table table-bordered table-hover">
                <thead class="btn-primary disabled">
                    <tr>
                        <td>Réf. Tâche</td>
                        <td>Libellé</td>
                        <td>Début Réel</td>
                        <td>Fin Réelle</td>
                        <td>Temps Consommé (h)</td>
                        <td>Coût (€)</td>
                        <td>Ratio tps réel / tps prévu</td>
                        <td>% avancement</td>
                        <td>Temps restant estimé (h)</td>
                        <td>Respect de la charge</td>
                        <td>Retard avéré</td>
                    </tr>
                </thead>
                <tbody id="recapTaches">
                </tbody>
            </table>
        </fieldset>
    </div>
</div>
<div>
    <button class="btn btn-primary" class="callFormSaisie" data-toggle="modal" data-target="#form-saisie" onClick="AddConsMajData();">Saisie</button>
    <button class="btn btn-info" id="callTabConso" data-toggle="modal" data-target="#consos">Liste des Saisies</button>
</div>
<div class="modal fade" id="consos" tabindex="-1" role="dialog" aria-labelledby="labelConso" aria-hidden="true">
    <div class="modal-dialog" style="overflow:initial;">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close"
                        data-dismiss="modal">
                    <span aria-hidden="true">&times;</span>
                    <span class="sr-only">Close</span>
                </button>
                <h4 class="modal-title" id="labelConso">
                    Liste des saisies
                </h4>
            </div>
            <div class="modal-body" style="height:250px;overflow-y:auto;">
                <table class="table table-bordered table-hover">
                    <thead class="btn-primary disabled">
                        <tr>
                            <td>Date</td>
                            <td>Nom de la ressource</td>
                            <td>Tâche</td>
                            <td>Temps passé sur la tâche (h)</td>
                            <td>Pourcentage avancement tâche (%)</td>
                        </tr>
                    </thead>
                    <tbody id="listeConsos">

                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>
<div class="modal fade" id="form-saisie" tabindex="-1" role="dialog"
     aria-labelledby="labelSaisie" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <!-- Modal Header -->
            <div class="modal-header">
                <button type="button" class="close"
                        data-dismiss="modal">
                    <span aria-hidden="true">&times;</span>
                    <span class="sr-only">Close</span>
                </button>
                <h4 class="modal-title" id="labelSaisie">
                    Ajouter une saisie
                </h4>
            </div>
            <div class="modal-body" id="addFormSaisie">
                <form class="form-horizontal">
                    <div class="row-fluid">
                        <div class="form-group">
                            <div class="col-md-12">
                                <label class="control-label" for="Nom">Nom</label>
                                <select class="form-control" id="selectRessource"></select>
                                <label class="control-label" for="referenceTache">Tâche avancée</label>
                                <select class="form-control" id="selectTache"></select>
                                <label class="control-label" for="tpsPasse">Temps passé sur la tâche (h)</label>
                                <input class="form-control" type="number" id="tpsPasseTache" min="0">
                                <label class="control-label" for="tpsPasse">Pourcentage avancement tâche (%)</label>
                                <input class="form-control" type="number" id="pourcentTache" min="0">
                                <label class="control-label" for="tpsPasse">Date de la saisie</label>
                                <input class="form-control" type="text" id="dateSaisie">
                            </div>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default"
                        data-dismiss="modal">
                    Cancel
                </button>
                <button type="button" id="addSaisie" class="btn btn-primary">
                    Ajouter
                </button>
            </div>
        </div>
    </div>
</div>
<script>
	$(function() {
        var dialogSaisie, formSaisie,

		tpsPasse = $( "#tpsPasseTache" ),
        pctTache = $("#pourcentTache"),
        dateSaisi = $("#dateSaisie"),
        allFields = $( [] ).add(tpsPasse).add(pctTache).add(dateSaisi),
        tips = $( ".validateTips" );

        function updateTips( t ) {
            tips
				.text( t )
				.addClass( "ui-state-highlight" );
            setTimeout(function() {
                tips.removeClass( "ui-state-highlight", 1500 );
            }, 500 );
        }

        function checkLength( o, n, min, max ) {
            if ( o.val().length > max || o.val().length < min ) {
                o.addClass( "ui-state-error" );
                updateTips( "Length of " + n + " must be between " +
                        min + " and " + max + "." );
                return false;
            } else {
                return true;
            }
        }

        function checkDate(d) {
            if (new Date(d.val()) > new Date()){
                d.addClass("ui-state-error");
                return false;
            } else {
                return true;
            }
        }

        function checkTempsPasse(d){
             $.getJSON("http://gestionprojet.herokuapp.com/queries/parametres.php?objet=parametres", function(data){
                if(jQuery.parseJSON(data.data) !== false)
                jQuery.parseJSON(data.data).forEach(function (currentValue) {
                    var duree = currentValue.dureeLegale;
                    if (d.val() > durre) {
                        d.addClass("ui-state-error");
                        return false;
                    } else {
                        return true;
                    }
                });
            });
        }

        function checkPercentage(d) {
            if (d.val() < 0 || d.val() > 100){
                d.addClass("ui-state-error");
                return false;
            } else {
                return true;
            }
        }

        function addSaisie() {
            var valid = true;
            allFields.removeClass( "ui-state-error" );

            valid = valid && checkLength( tpsPasse, "tempsPasse", 1, 10 ) && checkLength(pctTache, "pourcentTache", 1, 3) && checkPercentage(pctTache) && checkTempsPasse(tpsPasse) && checkDate(dateSaisi);

            if ( valid ) {
                console.log($("#selectRessource").val(), $("#selectTache").val(), $("#tpsPasseTache").val(), $("#pourcentTache").val(), formatForTable(new Date($("#dateSaisie").val())));
                $.ajax({
					type: "POST",
					url: "http://gestionprojet.herokuapp.com/queries/suivi.php",
					dataType: 'json',
					contentType:'application/json',
					data: '{"codeRessource" : "' + $("#selectRessource").val() + '", "codeTache" : "' + $("#selectTache").val() + '", "tempsPassee" : "' + $("#tpsPasseTache").val() + '", "avancement" : "' + $("#pourcentTache").val() + '","dateConso" : "' + formatForTable(new Date($("#dateSaisie").val())) + '"}',
					success : function(){
						majTaches();
                        majRecapProj();
                        majEtatProj();
                        majRecapTaches();
                        majListeConsos();
                        $('#form-saisie').modal('hide');
                    },
                    error : function(){
                        alert("Y'a un souci");
                        $('#form-saisie').modal('hide');
                    }
				});
            }
            return valid;
        }
        $( "#addSaisie" ).button().on( "click", function() {
            addSaisie();
        });

        $(".callFormSaisie").on("click", function(){
            $('#addFormSaisie').find('select').val('');
            $('#tpsPasseTache').val('');
            $('#pourcentTache').val('');
        });
    });
</script>
<script type="text/javascript">
	function majProjets(){
        $("#selectProjet").empty();

		$.getJSON("http://gestionprojet.herokuapp.com/queries/parametres.php?objet=projets", function(data){
			if(jQuery.parseJSON(data.data) !== false)
			jQuery.parseJSON(data.data).forEach(function (currentValue) {
				$("#selectProjet").append("<option value='" + currentValue.codeProjet + "'>" + currentValue.libelleProjet + "</option>");
			});
			$.getJSON("http://gestionprojet.herokuapp.com/queries/parametres.php?objet=ressources", function(data){
				if(jQuery.parseJSON(data.data) !== false)
				jQuery.parseJSON(data.data).forEach(function (currentValue) {
					$("#selectRessource").append("<option value='" + currentValue.codeRessource + "'>" + currentValue.nomRessource + "</option>");
				});

                $.ajax({
                    type: "GET",
                    url: "http://gestionprojet.herokuapp.com/queries/maj_session.php?projetEnCours=ok",
                    success : function(data){
                        $("#selectProjet").val(jQuery.parseJSON(data).data);
                        majTaches();
                        majRecapProj();
                        majEtatProj();
                        majRecapTaches();
                        majListeConsos();
                    }
                });
			});
		});
	}

	majProjets();

	function majTaches(){
		$("#selectTache").empty();

		$.getJSON("http://gestionprojet.herokuapp.com/queries/previsionnel.php?idProjet=" + $("#selectProjet").val(), function(data){
			if(jQuery.parseJSON(data.data) !== false)
			jQuery.parseJSON(data.data).forEach(function (currentValue) {
				$("#selectTache").append("<option value='" + currentValue.codeTache + "'>" + currentValue.libelleTache + "</option>");
			});
		});
	}

    function majRecapProj(){
        $("#nbTask").empty();
        $("#upperThanInitial").empty();
        $("#percentUpper").empty();
        $("#late").empty();
        $("#percentLate").empty();


        $.ajax({
            type: "GET",
                url: "http://gestionprojet.herokuapp.com/queries/suivi.php?recapProjet=" + $("#selectProjet").val(),
                    success : function(infos){
                var data = jQuery.parseJSON(infos);
                if(jQuery.parseJSON(data.data) !== false) {
                    $("#nbTask").append(jQuery.parseJSON(data.data).length);

                    var nbLate = 0;
                    var nbUpper = 0;

                    var dateJour = new Date();

                    for (var i = 0; i < jQuery.parseJSON(data.data).length; i++) {
                        var element = jQuery.parseJSON(data.data)[i];

                        var tempsConsomme = element.tempsConsomme == null ? "0" : element.tempsConsomme;
                        var cout = element.cout == null ? "0" : element.cout;
                        var ratioTemps = element.ratioTemps == null ? "0" : element.ratioTemps;

                        if (((new Date(element.dateFinPrevue) < dateJour) && element.dateFinReelle == null) || element.dateFinReelle > element.dateFinPrevue) {
                            nbLate++;
                        }

                        var tempsConso = element.tempsConsomme;
                        var tempsPrevu = element.tempsPrevu;

                        var shouldBeRed = (tempsConso - tempsPrevu) > 0;

                        if (shouldBeRed) {
                            nbUpper++;
                        }
                    }

                    $("#upperThanInitial").append(nbUpper);
                    $("#late").append(nbLate);
                    $("#percentUpper").append(parseFloat((nbUpper / jQuery.parseJSON(data.data).length * 100)).toFixed(2) + "%");
                    $("#percentLate").append(parseFloat((nbLate / jQuery.parseJSON(data.data).length * 100)).toFixed(2) + "%");
                }
            }
        });
    }

    function majEtatProj(){
        $("#debutPrevu").empty();
        $("#debutReel").empty();
        $("#ecartDebut").empty();
        $("#finPrevu").empty();
        $("#finReel").empty();
        $("#ecartFin").empty();
        $("#dureePrevue").empty();
        $("#dureeReelle").empty();
        $("#ecartDuree").empty();
        $("#montantPrevue").empty();
        $("#montantReelle").empty();
        $("#ecartMontant").empty();


        var months = ["Janvier", "Février", "Mars", "Avril", "Mai", "Juin", "Juillet", "Août", "Septembre", "Octobre", "Novembre", "Décembre"];

        $.getJSON("http://gestionprojet.herokuapp.com/queries/suivi.php?infoProjet=" + $("#selectProjet").val(), function(data){
            if(jQuery.parseJSON(data.data) !== false) {

                if (jQuery.parseJSON(data.data).dateDebutPrevue != null) {
                    var dateDebutPrevu = new Date(jQuery.parseJSON(data.data).dateDebutPrevue).getDate() + " " + months[new Date(jQuery.parseJSON(data.data).dateDebutPrevue).getMonth()] + " " + new Date(jQuery.parseJSON(data.data).dateDebutPrevue).getFullYear();
                    $("#debutPrevu").append(dateDebutPrevu);
                }

                if (jQuery.parseJSON(data.data).dateFinPrevue != null) {
                    var dateFinPrevu = new Date(jQuery.parseJSON(data.data).dateFinPrevue).getDate() + " " + months[new Date(jQuery.parseJSON(data.data).dateFinPrevue).getMonth()] + " " + new Date(jQuery.parseJSON(data.data).dateFinPrevue).getFullYear();
                    $("#finPrevu").append(dateFinPrevu);
                }

                if (jQuery.parseJSON(data.data).dureePrevu != null) {
                    $("#dureePrevue").append(jQuery.parseJSON(data.data).dureePrevu);
                }

                if (jQuery.parseJSON(data.data).montantPrevu != null) {
                    $("#montantPrevue").append(jQuery.parseJSON(data.data).montantPrevu);
                }

                if (jQuery.parseJSON(data.data).dateDebutReelle != null) {
                    var dateDebutReel = new Date(jQuery.parseJSON(data.data).dateDebutReelle).getDate() + " " + months[new Date(jQuery.parseJSON(data.data).dateDebutReelle).getMonth()] + " " + new Date(jQuery.parseJSON(data.data).dateDebutReelle).getFullYear();
                    $("#debutReel").append(dateDebutReel);
                }

                if (jQuery.parseJSON(data.data).dateFinReelle != null) {
                    if(jQuery.parseJSON(data.unfinished).length == 0) {
                        var dateFinReel = new Date(jQuery.parseJSON(data.data).dateFinReelle).getDate() + " " + months[new Date(jQuery.parseJSON(data.data).dateFinReelle).getMonth()] + " " + new Date(jQuery.parseJSON(data.data).dateFinReelle).getFullYear();
                        $("#finReel").append(dateFinReel);
                    } else {
                        $("#finReel").append("/");
                    }
                }

                if (jQuery.parseJSON(data.data).tempsConsomme != null) {
                    $("#dureeReelle").append(jQuery.parseJSON(data.data).tempsConsomme);
                }

                if (jQuery.parseJSON(data.data).montantReel != null) {
                    $("#montantReelle").append(jQuery.parseJSON(data.data).montantReel);
                }

                if (jQuery.parseJSON(data.data).ecartDateDebut != null) {
                    $("#ecartDebut").append(jQuery.parseJSON(data.data).ecartDateDebut);
                }

                if (jQuery.parseJSON(data.data).ecartDateFin != null) {
                    if(jQuery.parseJSON(data.unfinished).length == 0) {
                        $("#ecartFin").append(jQuery.parseJSON(data.data).ecartDateFin);
                    }
                    else {
                        $("#ecartFin").append("/");
                    }
                }

                if (jQuery.parseJSON(data.data).ecartDuree != null) {
                    $("#ecartDuree").append(jQuery.parseJSON(data.data).ecartDuree);
                }

                if (jQuery.parseJSON(data.data).ecartMontant != null) {
                    $("#ecartMontant").append(jQuery.parseJSON(data.data).ecartMontant);
                }
            }
        });
    }

    function majRecapTaches(){
        $("#recapTaches").empty();

        $.getJSON("http://gestionprojet.herokuapp.com/queries/suivi.php?recapProjet=" + $("#selectProjet").val(), function(data){
            jQuery.parseJSON(data.data).forEach(function(currentValue) {
                var dateDebutReelle = currentValue.dateDebutReelle == null ? "/" : currentValue.dateDebutReelle;
                var dateFinReelle = currentValue.dateFinReelle == null ? "/" : currentValue.dateFinReelle;
                var dateJour = new Date();
                var couleurCharge = "#B6F576";
                var couleurRetard = "#F57676";

                var tempsConsomme = currentValue.tempsConsomme == null ? "0" : currentValue.tempsConsomme;
                var cout = currentValue.cout == null ? "0" : currentValue.cout;
                var ratioTemps = currentValue.ratioTemps == null ? "0" : currentValue.ratioTemps;

                var tempsRestant = Math.round(currentValue.tempsPrevu);

                if (currentValue.avancement != 0) {
                    if (tempsConsomme != "0"){
                        tempsRestant = Math.round(((tempsConsomme / currentValue.avancement) * 100) - tempsConsomme);
                    }
                }

                if (((new Date(currentValue.dateFinPrevue) < dateJour) && currentValue.dateFinReelle == null) || currentValue.dateFinReelle > currentValue.dateFinPrevue) {
                    couleurRetard = "#F57676";
                } else {
                    couleurRetard = "#B6F576";
                }

                var tempsConso = currentValue.tempsConsomme;
                var tempsPrevu = currentValue.tempsPrevu;

                var shouldBeRed = (tempsConso - tempsPrevu) > 0;

                if (shouldBeRed) {
                    couleurCharge = "#F57676";
                } else {
                    couleurCharge = "#B6F576";
                }

                $("#recapTaches").append("<tr><td>" + currentValue.referenceTache + "</td><td>" + currentValue.libelleTache + "</td><td>" + dateDebutReelle + "</td><td>" + dateFinReelle + "</td><td>" + tempsConsomme + "</td><td>" + cout + "</td><td>" + parseFloat(ratioTemps).toFixed(2) + "</td><td> <div class='progress'><div class='progress-bar progress-bar-info progress-bar-striped' role='progressbar'  aria-valuemin='0' aria-valuemax='100' style='width: "+ currentValue.avancement +"%;'>"+ currentValue.avancement +" %</div></div></td><td>" + tempsRestant + "</td><td style='background-color: " + couleurCharge + ";'></td><td style='background-color: " + couleurRetard + ";'></td></tr>");
            });
        });
    }

    function majSelectedSuiv(){
        $.ajax({
            type: "POST",
            url: "http://gestionprojet.herokuapp.com/queries/maj_session.php",
            data: {
                projetEnCours: $("#selectProjet").val()
            }
        });
    }

    function majListeConsos(){
        $("#listeConsos").empty();

        $.getJSON("http://gestionprojet.herokuapp.com/queries/suivi.php?allConsos=1", function(data){
            if(jQuery.parseJSON(data.data) !== false)
            jQuery.parseJSON(data.data).forEach(function (currentValue) {
                $("#listeConsos").append("<tr><td><a class=\"callFormSaisie\" data-toggle=\"modal\" data-target=\"#form-saisie\" onClick=\"updateConsMajData('" + currentValue.codeConso + "','" + currentValue.codeRessource + "','" + currentValue.codeTache + "','" + currentValue.tempsPassee + "','" + currentValue.avancement + "', '" + currentValue.date + "')\">" + formatDate(new Date(currentValue.date)) + "</a></td><td><a class=\"callFormSaisie\" data-toggle=\"modal\" data-target=\"#form-saisie\" onClick=\"updateConsMajData('" + currentValue.codeConso + "','" + currentValue.codeRessource + "','" + currentValue.codeTache + "','" + currentValue.tempsPassee + "','" + currentValue.avancement + "', '" + currentValue.date + "')\">" + currentValue.nomRessource + "</a></td><td><a class=\"callFormSaisie\" data-toggle=\"modal\" data-target=\"#form-saisie\" onClick=\"updateConsMajData('" + currentValue.codeConso + "','" + currentValue.codeRessource + "','" + currentValue.codeTache + "','" + currentValue.tempsPassee + "','" + currentValue.avancement + "', '" + currentValue.date + "')\">" + currentValue.libelleTache + "</a></td><td><a class=\"callFormSaisie\" data-toggle=\"modal\" data-target=\"#form-saisie\" onClick=\"updateConsMajData('" + currentValue.codeConso + "','" + currentValue.codeRessource + "','" + currentValue.codeTache + "','" + currentValue.tempsPassee + "','" + currentValue.avancement + "', '" + currentValue.date + "')\">" + currentValue.tempsPassee + "</a></td><td><a class=\"callFormSaisie\" data-toggle=\"modal\" data-target=\"#form-saisie\" onClick=\"updateConsMajData('" + currentValue.codeConso + "','" + currentValue.codeRessource + "','" + currentValue.codeTache + "','" + currentValue.tempsPassee + "','" + currentValue.avancement + "', '" + currentValue.date + "')\">" + currentValue.avancement + "</a></td></tr>");
            });
        });
    }

    Date.prototype.addDays = function(days)
    {
        var dat = new Date(this.valueOf());
        dat.setDate(dat.getDate() + days);
        return dat;
    }

    function formatDate(d1) {
        var mois = ["Janvier", "Février", "Mars", "Avril", "Mai", "Juin", "Juillet", "Août", "Septembre", "Octobre", "Novembre", "Décembre"];

        var currentDay = d1.getDate();
        var currentMois = d1.getMonth();
        var currentYear = d1.getFullYear();

        var date = currentDay + " " + mois[currentMois] + " " + currentYear;

        return date;
    }

    function formatForInsertion(d1){
        var currentDay = d1.getDate();
        var currentMois = d1.getMonth() + 1;
        var currentYear = d1.getFullYear();

        if (currentDay < 10) {
            currentDay = "0" + currentDay;
        }

        if (currentMois < 10) {
            currentMois = "0" + currentMois;
        }

        var date = currentMois + "/" + currentDay + "/" + currentYear;

        return date;
    }

    function formatForTable(d1){
        var currentDay = d1.getDate();
        var currentMois = d1.getMonth() + 1;
        var currentYear = d1.getFullYear();

        if (currentDay < 10) {
            currentDay = "0" + currentDay;
        }

        if (currentMois < 10) {
            currentMois = "0" + currentMois;
        }

        var date = currentYear + "-" + currentMois + "-" + currentDay;

        return date;
    }

    function updateConsMajData(code, codeRessource, codeTache, tpsPasse, avancemt, dateConso){

        $("#labelSaisie").html("Modifier une saisie");
        $("#addSaisie").html("Mettre à jour");

        $("#selectRessource").val(codeRessource);
        $("#selectTache").val(codeTache);
        $("#tpsPasseTache").val(tpsPasse);
        $("#pourcentTache").val(avancemt);

        $("#dateSaisie").val(formatForInsertion(new Date(dateConso)));

        $.ajax({
            type: "POST",
                url: "http://gestionprojet.herokuapp.com/queries/maj_session.php",
                data: {
                    codeConso: code
                },
                success: function(data) {
                }
        })
    }

    function AddConsMajData(){
        $("#labelSaisie").html("Ajouter une saisie");
        $("#addSaisie").html("Ajouter");

        $("#tpsPasseTache").val("");
        $("#pourcentTache").val("");
        $("#dateSaisie").val("");

        $.ajax({
            type: "POST",
                url: "http://gestionprojet.herokuapp.com/queries/maj_session.php",
                data: {
                    codeConso: null
                },
                success: function(data) {
                }
        })
    }

    $("#dateSaisie").datepicker();
</script>